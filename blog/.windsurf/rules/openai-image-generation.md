# OpenAI画像生成システム - 運用ルール

## 🎯 基本原則

### システム概要
- **場所**: `/Users/watanabehidetaka/Claudecode/250629_Auto_blog_Writing/04.OpenAI_Imagen_Create`
- **用途**: ブログ記事用のAI画像生成
- **画像スタイル**: 粘土フィギュア風の一貫したキャラクター画像

### 固定キャラクター設定
- **ボス猫**: 三毛柄の擬人化猫、黒スーツ、丸サングラス
- **インターン猫**: 子猫フィギュア、ブカブカスーツ、メモ帳
- **ロボ助手**: ミント色ボディ、LEDほっぺ、クリップボード「Task List」

## 💰 予算管理ルール

### 料金制限（厳守）
```env
DAILY_BUDGET_LIMIT=0.28    # 1日7枚まで
MONTHLY_BUDGET_LIMIT=8.00  # 月200枚まで
COST_PER_IMAGE=0.04        # 1枚約6円
```

### 使用ガイドライン
- **1日の目安**: 最大7枚まで
- **緊急時のみ**: 予算上限近くまで使用
- **通常運用**: 1日3-5枚程度に抑制
- **毎月1日**: 予算使用状況を確認

## 🗂️ ファイル管理ルール

### 保存先構造
```
/Users/watanabehidetaka/Claudecode/250629_Auto_blog_Writing/03.data/XX.image/
├── 20250705/
│   ├── 20250705_記事タイトル.png
│   └── 20250705_テーマ名.png
└── 20250706/
    └── 20250706_新記事.png
```

### ファイル命名規則
- **形式**: `YYYYMMDD_テーマ名.png`
- **例**: `20250705_AI導入状況.png`
- **注意**: 日本語OK、特殊文字は自動変換

## 🎨 画像生成ルール

### 基本的な使用方法
```bash
cd /Users/watanabehidetaka/Claudecode/250629_Auto_blog_Writing/04.OpenAI_Imagen_Create
npm start "記事テーマ"
```

### プロンプト作成指針
- **記事内容に関連するテーマ**を簡潔に指定
- **具体的すぎない**方が良い結果（システムが自動強化）
- **日本語OK**: 「AI導入状況」「会議風景」「プレゼン」など

### 画像スタイル（自動適用）
- 手作り粘土フィギュア質感
- ティルトシフト写真風
- 浅い被写界深度
- マジカルリアリズム

## 🚨 運用上の注意事項

### 実行前チェック
1. **予算確認**: 1日の残り枚数をチェック
2. **テーマ決定**: 記事内容に最適なキーワード選択
3. **重複回避**: 同じテーマの画像が既にないか確認

### エラー対応
- **API timeout**: プロンプトを短くして再実行
- **予算超過**: 翌日まで待機、または月次予算確認
- **画像保存失敗**: ディスク容量とパーミッション確認

### 品質管理
- **生成後確認**: 画像が記事テーマに適しているか
- **再生成判断**: 不適切な場合は別テーマで再挑戦
- **保存確認**: 指定パスに正しく保存されているか

## 📊 コスト監視ルール

### 日次チェック
```bash
# 実行後に表示される使用状況を記録
Daily: $0.XX / $0.28
Monthly: $0.XX / $8.00
Total requests: XX
```

### 月次レビュー
- **使用傾向分析**: どのテーマで多く生成したか
- **予算効率評価**: 有効活用できているか
- **来月計画**: 予算配分の調整

## 🔧 システム保守

### 定期メンテナンス
- **月1回**: `cost-tracking.json`のバックアップ
- **四半期**: 古い画像ファイルの整理
- **必要時**: 環境変数の確認・更新

### アップデート方針
- **コア機能**: 変更時は十分なテスト
- **プロンプト強化**: `prompt_guide.md`で調整
- **キャラクター設定**: 一貫性を保持

## 💡 ベストプラクティス

### 効率的な使い方
1. **朝一番**: その日の画像生成計画を立てる
2. **バッチ処理回避**: 1枚ずつ確認しながら生成
3. **テーマ分散**: 同じような画像を連続生成しない

### 記事との連携
- **記事執筆前**: 必要な画像テーマをリストアップ
- **執筆中**: 記事の流れに合わせて画像を生成
- **公開前**: 画像と記事内容の整合性を最終確認

## 🎪 Claude Codeでの指示例

### 基本的な指示パターン
```
「[記事タイトル]に相応しい画像生成をしてください。
画像生成は/Users/watanabehidetaka/Claudecode/250629_Auto_blog_Writing/04.OpenAI_Imagen_Createを使用してください。」
```

### 具体例
```
「AI導入実態調査の記事用画像を生成してください」
「プレゼンテーション資料用の会議風景画像を作成してください」
「日本企業のデジタル化をテーマにした画像を生成してください」
```

---

## 📝 更新履歴

- **2025-07-05**: 初版作成
- **予算制限**: 月200枚、日7枚に設定
- **保存先**: `03.data/XX.image/`に統一

---

*このルールに従って、効率的で一貫性のある画像生成を行いましょう！*